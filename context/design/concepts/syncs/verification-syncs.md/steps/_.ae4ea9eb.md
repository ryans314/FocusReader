---
timestamp: 'Mon Nov 10 2025 18:13:00 GMT-0500 (Eastern Standard Time)'
parent: '[[..\20251110_181300.c436e0c1.md]]'
content_id: ae4ea9eb5f0a9b519ef79e94be60da5e589302c2469631b305f8e04ea81a16df
---

# Final API Specifications for Verified Queries

Here is the updated API documentation for the three query endpoints. This now accurately reflects the behavior of the corrected code.

### POST /api/Profile/\_getUserDetails

* **Description:** Retrieves the username for the user associated with the provided session.
* **Authorization:** Requires a valid `session` ID in the request body.
* **Request Body:**
  ```json
  {
    "session": "ID"
  }
  ```
* **Success Response Body:** A JSON object containing the username.
  ```json
  {
    "username": "string"
  }
  ```
* **Error Response Body:** An object containing an error message.
  ```json
  {
    "error": "User '[user_id]' not found."
  }
  ```

***

### POST /api/FocusStats/\_viewStats

* **Description:** Retrieves the high-level reading statistics for the user associated with the provided session.
* **Authorization:** Requires a valid `session` ID in the request body.
* **Request Body:**
  ```json
  {
    "session": "ID"
  }
  ```
* **Success Response Body:** A JSON object containing the stats data.
  ```json
  {
    "stats": {
      "id": "ID",
      "user": "ID",
      "focusSessionIds": ["ID", "ID", "..."]
    }
  }
  ```
* **Error Response Body:** An object containing an error message.
  ```json
  {
    "error": "FocusStats not found for user [user_id]."
  }
  ```

***

### POST /api/FocusStats/\_getSessions

* **Description:** Retrieves the detailed data for all reading sessions of the user associated with the provided session.
* **Authorization:** Requires a valid `session` ID in the request body.
* **Request Body:**
  ```json
  {
    "session": "ID"
  }
  ```
* **Success Response Body:** A JSON object containing a flat array of all session objects.
  ```json
  {
    "sessions": [
      {
        "_id": "ID",
        "user": "ID",
        "document": "ID",
        "startTime": "Date",
        "endTime": "Date | null"
      },
      {
        "_id": "ID",
        "user": "ID",
        "document": "ID",
        "startTime": "Date",
        "endTime": "Date | null"
      }
    ]
  }
  ```
* **Note:** If the user has no sessions, the response will be `{"sessions": []}`.
