---
timestamp: 'Mon Nov 10 2025 17:28:47 GMT-0500 (Eastern Standard Time)'
parent: '[[..\20251110_172847.00cca8f5.md]]'
content_id: ca26dfa3793c6c8de794e1d9c349a81484c09965b6a3c81d0620666b21250173
---

# Verified API Endpoint Specifications

The following API endpoints have been secured and now require a valid `session` ID to be passed in the body of every `POST` request. This `session` is obtained from the successful response of the `/api/Profile/authenticate` endpoint.

***

### POST /api/Profile/deleteAccount

* **Description:** Deletes the account associated with the provided session.
* **Authorization:** Requires a valid `session` ID. The server uses this to identify which user account to delete.
* **Request Body:**
  ```json
  {
    "session": "ID"
  }
  ```
* **Success Response Body:**
  ```json
  {
    "success": true
  }
  ```
* **Error Response Body:**
  ```json
  {
    "error": "Session with id [session_id] not found"
  }
  ```
  ```json
  {
    "error": "User '[user_id]' not found."
  }
  ```

***

### POST /api/Profile/changePassword

* **Description:** Changes the password for the user associated with the provided session.
* **Authorization:** Requires a valid `session` ID.
* **Request Body:**
  ```json
  {
    "session": "ID",
    "oldPassword": "string",
    "newPassword": "string"
  }
  ```
* **Success Response Body:**
  ```json
  {
    "user": "ID"
  }
  ```
* **Error Response Body:**
  ```json
  {
    "error": "Session with id [session_id] not found"
  }
  ```
  ```json
  {
    "error": "Incorrect old password."
  }
  ```

***

### POST /api/Library/removeDocument

* **Description:** Removes a specified document from the library of the user associated with the provided session.
* **Authorization:** Requires a valid `session` ID.
* **Request Body:**
  ```json
  {
    "session": "ID",
    "document": "ID"
  }
  ```
* **Success Response Body:**
  ```json
  {
    "success": true
  }
  ```
* **Error Response Body:**
  ```json
  {
    "error": "Session with id [session_id] not found"
  }
  ```
  ```json
  {
    "error": "Document [document_id] is not in library [library_id]."
  }
  ```

***

### POST /api/FocusStats/removeSession

* **Description:** Removes a specific focus/reading session record.
* **Authorization:** Requires a valid `session` ID to authorize the request (the system does not currently verify that the session belongs to the user, only that the request is from a logged-in user).
* **Request Body:**
  ```json
  {
    "session": "ID",
    "focusSession": "ID"
  }
  ```
* **Success Response Body:**
  ```json
  {
    "success": true
  }
  ```
* **Error Response Body:**
  ```json
  {
    "error": "Session with id [session_id] not found"
  }
  ```
  ```json
  {
    "error": "FocusSession [focus_session_id] not found."
  }
  ```

***

### POST /api/Profile/\_getUserDetails

* **Description:** Retrieves the username for the user associated with the provided session.
* **Authorization:** Requires a valid `session` ID.
* **Request Body:**
  ```json
  {
    "session": "ID"
  }
  ```
* **Success Response Body (Query):**
  ```json
  {
    "details": [
      {
        "username": "string"
      }
    ]
  }
  ```
* **Error Response Body:**
  ```json
  {
    "details": [
      {
        "error": "User '[user_id]' not found."
      }
    ]
  }
  ```

***

### POST /api/FocusStats/\_viewStats

* **Description:** Retrieves the high-level reading statistics for the user associated with the provided session.
* **Authorization:** Requires a valid `session` ID.
* **Request Body:**
  ```json
  {
    "session": "ID"
  }
  ```
* **Success Response Body (Query):**
  ```json
  {
    "stats": [
      {
        "focusStats": {
          "id": "ID",
          "user": "ID",
          "focusSessionIds": ["ID", "ID", "..."]
        }
      }
    ]
  }
  ```
* **Error Response Body:**
  ```json
  {
    "stats": [
      {
        "error": "FocusStats not found for user [user_id]."
      }
    ]
  }
  ```

***

### POST /api/FocusStats/\_getSessions

* **Description:** Retrieves the detailed data for all reading sessions of the user associated with the provided session.
* **Authorization:** Requires a valid `session` ID.
* **Request Body:**
  ```json
  {
    "session": "ID"
  }
  ```
* **Success Response Body (Query):**
  ```json
  {
    "sessions": [
      {
        "focusSession": {
          "_id": "ID",
          "user": "ID",
          "document": "ID",
          "startTime": "Date",
          "endTime": "Date | null"
        }
      }
      // ... more session objects
    ]
  }
  ```
* **Error Response Body:**
  ```json
  {
    "sessions": [
      {
        "error": "FocusStats not found for user [user_id]. Cannot retrieve sessions."
      }
    ]
  }
  ```
